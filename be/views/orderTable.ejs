<script src="/src/js/OrderManager.js" type="text/javascript"></script>

<div class="container d-flex flex-column justify-content-start vh-80 m-4">
	<div class="d-flex justify-content-start mb-2">
		<!-- <button
			class="btn btn-primary"
			data-mode="new"
			data-bs-toggle="modal"
			data-bs-target="#infoModal"
		>
			Thêm mới <i class="bi bi-plus-square"></i>
		</button> -->
	</div>
	<table class="table table-striped">
		<thead>
			<tr>
				<th scope="col">STT</th>
				<th scope="col">ID</th>
				<th scope="col">ID người mua</th>
				<th scope="col">Giá</th>
				<th scope="col">Trạng thái</th>
			</tr>
		</thead>
		
		<tbody>
			<% Object.entries(order).map(([key, value], i) => { %>
			<tr id="<%=value.iddonhang%>">
				<% console.log(value);
				 %>
				<th scope="row"><%=i+1 %></th>
				<td><%=value.iddonhang%></td>
				<td><%=value.idnguoimua%></td>
				<td><%=Math.round(value.idmonhang.reduce((total, monhang) => total + Math.round(monhang.gia), 0))%></td>
				<td>
					<select class="form-select changeStatus" data-id="<%=value.iddonhang%>">
						<% if (value.trangthai ==='done') {%>
							<option disabled value="done" <%= value.trangthai === 'done' ? 'selected' : '' %>>done</option>

							<% } else { %>

						<option value="wait" <%= value.trangthai === 'wait' ? 'selected' : '' %>>wait</option>
						<option value="paid" <%= value.trangthai === 'paid' ? 'selected' : '' %>>paid</option>
						<option value="cancel" <%= value.trangthai === 'cancel' ? 'selected' : '' %>>cancel</option>
						<% }  %>

					</select>
				</td>
			</tr>
			<% }) %>
		</tbody>
	</table>
</div>

